# 运营配置说明（非技术版）

## 1. 你只需要改哪个文件
- 生效文件：`config/game-config.js`
- 模板文件：`config/game-config.ops-template.js`

建议流程：先备份 `game-config.js`，再用模板内容覆盖并开始改。

## 2. 常见改法

### 改节奏快慢
- `rules.tickMs`：越小越快，越大越慢。

### 改玩家初始点数
- `rules.startPoints`

### 改突破难度
- `rules.breakthrough.baseChance`：越大越容易突破。
- `rules.breakthrough.perRealmPenalty`：越大后期越难。

### 加一个新天赋
在 `talents` 里复制一条，修改：
- `name` 名称
- `type`：`positive`/`negative`/`neutral`
- `desc` 描述
- `effects` 加减属性

示例：
```js
{ name: "锦鲤体质", type: "positive", desc: "气运+4", effects: [{ field: "stats.qiyun", add: 4 }] }
```

### 加一个新事件
在 `events` 里复制一条，修改：
- `text` 文案
- `chance` 概率（0~1）
- 可选 `trigger` 条件
- 可选 `effects` 数值变化
- 可选 `isDeath: true`（死亡事件）

示例：
```js
{
  text: "你在秘境中找到残卷，修为+200。",
  chance: 0.01,
  effects: [{ field: "cultivation", add: 200 }]
}
```

**事件冷却机制**：
- 普通事件触发后，接下来 **10年** 内不会再次触发同一事件
- 填充事件（`fillers`）**不受冷却限制**，可重复触发

### 加/改填充事件（fillers）
在 `fillers` 数组中添加字符串或性别特定对象：

普通文本（男女通用）：
```js
"打坐修炼，感觉今天灵气有点稀薄。"
```

性别特定文本（根据玩家性别显示不同内容）：
```js
{ male: "对着镜子感叹自己仙风道骨，帅气逼人。", female: "对着镜子苦恼自己长得太红颜祸水，怕是出门又要引发宗门大战。" }
```

### 加一个新称号
在 `titles` 里复制一条，修改：
- `name` 名称
- `desc` 描述
- `condition` 条件

示例：
```js
{
  name: "欧皇转世",
  color: "#ffd700",
  desc: "达成条件：气运>30",
  condition: { all: [{ field: "stats.qiyun", op: ">", value: 30 }] }
}
```

### 开启 GA 行为统计（漏斗）
在 `analytics` 中配置：
- `enabled`: 设为 `true`
- `gaMeasurementId`: 填你的 GA4 Measurement ID（如 `G-XXXXXXX`）
- `funnelName`: 漏斗名称（默认 `xiuxian-core`，可用于区分不同版本）

## 3. 字段速查
- 可用属性：`stats.tianfu` `stats.wuxing` `stats.tizhi` `stats.qiyun`
- 其他字段：`age` `realmIdx` `failCount` `deathReason` `gender`
- 性别字段：`gender` 值为 `"male"`（男）或 `"female"`（女）
- 比较符：`==` `!=` `>` `>=` `<` `<=`
- 文本匹配：`includes` `includesAny`

## 4. 常见错误
- 漏逗号：上一行末尾要有 `,`
- 用了中文引号：要用英文 `"`。
- `chance` 写超范围：必须是 0 到 1 之间。

## 5. 发布前检查
1. 打开页面，能正常进入游戏。
2. 看日志是否有新增事件文案。
3. 死亡后结算页能看到称号。
4. 出错就先回滚到备份版本。
